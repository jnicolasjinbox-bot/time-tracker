<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0f0f13">
<link rel="manifest" href="manifest.json">
<title>Grind Time</title>
<link rel="stylesheet" href="style.css">
<script>if('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js');</script>
</head>
<body>
<div id="app">
  <!-- Header -->
  <header id="header">
    <h1 id="page-title">Dashboard</h1>
    <button id="add-btn" class="header-btn" onclick="handleAdd()">+</button>
  </header>

  <!-- Pages -->
  <main id="main">
    <!-- Dashboard -->
    <section id="page-dashboard" class="page active">
      <div class="dashboard-grid">
        <div class="stat-card">
          <div class="stat-value" id="stat-today-tasks">0</div>
          <div class="stat-label">Tasks Today</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-today-time">0h</div>
          <div class="stat-label">Productive Time</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-week-tasks">0</div>
          <div class="stat-label">This Week</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-streak">0üî•</div>
          <div class="stat-label">Day Streak</div>
        </div>
      </div>

      <div class="section-header">
        <h2>Goals Progress</h2>
      </div>
      <div id="dashboard-goals"></div>

      <div class="section-header">
        <h2>Today's Schedule</h2>
      </div>
      <div id="dashboard-schedule"></div>

      <div class="section-header">
        <h2>Upcoming Deadlines</h2>
      </div>
      <div id="dashboard-deadlines"></div>
    </section>

    <!-- Tasks -->
    <section id="page-tasks" class="page">
      <div class="filter-bar">
        <select id="task-filter-cat" onchange="renderTasks()">
          <option value="all">All Categories</option>
        </select>
        <select id="task-filter-status" onchange="renderTasks()">
          <option value="active">Active</option>
          <option value="completed">Completed</option>
          <option value="all">All</option>
        </select>
      </div>
      <div id="task-list"></div>
    </section>

    <!-- Goals -->
    <section id="page-goals" class="page">
      <div id="goal-list"></div>
    </section>

    <!-- Planner -->
    <section id="page-planner" class="page">
      <div class="planner-date-nav">
        <button onclick="changeDate(-1)">‚Äπ</button>
        <span id="planner-date"></span>
        <button onclick="changeDate(1)">‚Ä∫</button>
      </div>
      <div id="planner-grid"></div>
    </section>

    <!-- Settings -->
    <section id="page-settings" class="page">
      <div class="settings-group">
        <h2>Work Hours</h2>
        <div class="setting-row">
          <label>Start</label>
          <input type="time" id="work-start" value="06:00" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>End</label>
          <input type="time" id="work-end" value="17:00" onchange="saveSettings()">
        </div>
        <div class="setting-row">
          <label>Work Days</label>
          <div id="work-days" class="day-picker"></div>
        </div>
      </div>
      <div class="settings-group">
        <h2>Categories</h2>
        <div id="category-list"></div>
        <div class="setting-row">
          <input type="text" id="new-cat-name" placeholder="New category">
          <input type="color" id="new-cat-color" value="#6C5CE7">
          <button onclick="addCategory()">Add</button>
        </div>
      </div>
      <div class="settings-group">
        <h2>Data</h2>
        <button class="btn-full" onclick="exportData()">Export JSON</button>
        <button class="btn-full" onclick="document.getElementById('import-file').click()">Import JSON</button>
        <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)">
        <button class="btn-full btn-danger" onclick="clearAllData()">Clear All Data</button>
      </div>
    </section>
  </main>

  <!-- Bottom Nav -->
  <nav id="bottom-nav">
    <button class="nav-btn active" data-page="dashboard">
      <span class="nav-icon">üìä</span>
      <span class="nav-label">Dashboard</span>
    </button>
    <button class="nav-btn" data-page="tasks">
      <span class="nav-icon">‚úÖ</span>
      <span class="nav-label">Tasks</span>
    </button>
    <button class="nav-btn" data-page="goals">
      <span class="nav-icon">üéØ</span>
      <span class="nav-label">Goals</span>
    </button>
    <button class="nav-btn" data-page="planner">
      <span class="nav-icon">üìÖ</span>
      <span class="nav-label">Planner</span>
    </button>
    <button class="nav-btn" data-page="settings">
      <span class="nav-icon">‚öôÔ∏è</span>
      <span class="nav-label">Settings</span>
    </button>
  </nav>
</div>

<!-- Modal -->
<div id="modal-overlay" class="modal-overlay" onclick="closeModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-header">
      <h2 id="modal-title">Add Task</h2>
      <button class="modal-close" onclick="closeModal()">√ó</button>
    </div>
    <div id="modal-body" class="modal-body"></div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
